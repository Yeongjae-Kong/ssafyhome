<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.home.model.dao.UserDao">

    <resultMap id="UserMap" type="com.ssafy.home.model.dto.User">
        <id column="mno" property="mno" />
        <result column="name" property="name" />
        <result column="email" property="email" />
        <result column="password" property="password" />
        <result column="role" property="role" />
        <result column="created_at" property="createdAt" />
        <result column="updated_at" property="updatedAt" />
    </resultMap>

    <select id="selectByEmail" parameterType="string" resultMap="UserMap">
        SELECT mno, name, email, password, role, created_at, updated_at
        FROM `user`
        WHERE email = #{email}
        LIMIT 1
    </select>

    <select id="selectById" parameterType="int" resultMap="UserMap">
        SELECT mno, name, email, password, role, created_at, updated_at
        FROM `user`
        WHERE mno = #{mno}
    </select>

    <insert id="insert" parameterType="com.ssafy.home.model.dto.User" useGeneratedKeys="true" keyProperty="mno">
        INSERT INTO `user` (name, email, password, role)
        VALUES (#{name}, #{email}, #{password}, #{role})
    </insert>

    <!-- Optional unique email index assumed. -->

</mapper>
